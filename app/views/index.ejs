<% include header %>
  
  <div class="page-header">
    <h1>Upload and browse photos for mosaics</h1>
    <p>We will create a mosaic of this picture based on the images you will submit in next step.</p>
  </div>

  <div id="upload-form" class="row">
    <div class="col-sm-12">
    
      <script type="text/javascript">
    function checkFile() {
        var fileElement = document.getElementById("snapshot");
        var fileExtension = "";
        if (fileElement.value.lastIndexOf(".") > 0) {
            fileExtension = fileElement.value.substring(fileElement.value.lastIndexOf(".") + 1, fileElement.value.length);
        }
        if (fileExtension == "gif") {
            alert("You must select a PNG or JPG file for upload");
            return false;
        }
        else {
            
            return true;
        }
    }
</script>

    <form action="/upload" method="post" 
      enctype="multipart/form-data"
      onsubmit="return checkFile();">
      
      <div class="form-group">
        <label for="snapshot">Choose the image (jpg or png) you want to make a mosaic of.</label>
        <input id="snapshot" type="file" class="form-control" name="snapshot" accept='image/x-png, image/jpeg' />
        <p class="help-block">
        <p class="help-block">JPG or PNG only.</p>
      </div>
      
      <input type="submit" class="btn btn-default" value="Upload" />
    
    </form>

    </div>
  </div>


  <% if(images && images.length > 0) { %>
  <div id="pictures row">
    <h2>Your mosaics:</h2>
		<% images.forEach(function(image) { %>
      <div class="col-sm-6 col-md-4">
  			<div class="thumbnail">
          <a href="/photos/<%= image.name %>"><img src="<%= image.url %>" /></a>
        </div>
      </div>
		<% }); %>
  </div>
  <% } %>

<% include footer %>